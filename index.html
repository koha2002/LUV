<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>T·ªè t√¨nh ƒë·∫πp nh∆∞ m∆°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Confetti CDN -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <style>
    html,body {
      min-height: 100vh; margin:0; padding:0; box-sizing: border-box;
      overflow-x: hidden; background: #1e1338;
    }
    body {
      position: relative;
      display: flex; align-items: center; justify-content: center;
      min-height: 100vh;
    }
    /* Liquid background */
    #liquid-bg {
      position:fixed; left:0;top:0;width:100vw;height:100vh;z-index:0;pointer-events:none;
      filter: blur(1.3px) brightness(1.11) saturate(1.13);
      background: #1e1338;
    }
    /* Glass box */
    .lovebox {
      max-width: 400px;
      width: 92vw;
      padding: 40px 20px 35px 20px;
      border-radius: 40px;
      background: rgba(255,255,255,0.25);
      box-shadow: 0 14px 80px 0 #6b5c8e40, 0 0 34px #fff5 inset;
      backdrop-filter: blur(11px) saturate(120%);
      -webkit-backdrop-filter: blur(11px) saturate(120%);
      margin:0 auto;
      text-align:center;
      z-index: 2;
      position: relative;
      animation: popIn 1.1s cubic-bezier(.31,1.53,.61,.87);
    }
    @keyframes popIn {
      0% {transform:scale(0.7) translateY(80px); opacity:0;}
      50%{transform:scale(1.06);}
      100% {transform:scale(1) translateY(0); opacity:1;}
    }
    .heartwave {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      display:inline-flex;align-items:center;justify-content:center;
      background: radial-gradient(circle,#fff6 40%,#fff0 100%);
      position:relative;
      margin-bottom: 10px;
      box-shadow: 0 4px 24px #fff9;
      cursor: pointer;
      user-select: none;
      transition: transform 0.15s;
      overflow: visible;
    }
    .heartwave:active { transform: scale(1.12);}
    .heart-icon {
      font-size: 68px;
      color: #ff3c77;
      text-shadow: 0 4px 40px #fdd0f2b3, 0 0 24px #fff2;
      animation: pulse 1.3s infinite;
      font-family: 'Pacifico', cursive;
      transition: filter 0.2s;
    }
    @keyframes pulse {
      0%,100%{filter:drop-shadow(0 0 0 #ff3c77a3);}
      35%{filter:drop-shadow(0 0 22px #ff5ea1);}
      70%{filter:drop-shadow(0 0 8px #fdc8d6);}
    }
    h1 {
      font-family: 'Pacifico', cursive;
      font-size: 2.1rem;
      color: #ff5ea1;
      margin: 15px 0 5px;
      text-shadow: 0 1px 18px #fff9, 0 0 10px #d9d4ffb3;
      letter-spacing: 1.2px;
    }
    .subtitle {
      font-family: 'Montserrat', Arial, sans-serif;
      color: #342544;
      font-size: 1.14rem;
      margin-bottom: 25px;
      font-weight: 500;
      text-shadow: 0 1px 9px #fff5, 0 0 2px #fdc8d6;
      letter-spacing: 0.15px;
      line-height: 1.54;
    }
    .btn-row {
      margin: 36px 0 10px 0; height:64px; width: 100%; position:relative;
      display: flex; justify-content: center; align-items: center;
    }
    #yesBtn {
      background: linear-gradient(90deg,#ff4b2b,#a1c4fd 90%);
      color: #fff; border: none; border-radius: 999px;
      padding: 14px 38px;
      font-size: 1.19rem;
      font-family: inherit;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 20px #ffbdbd49;
      filter: drop-shadow(0 0 12px #fdc8d68a);
      outline: none;
      z-index: 1;
      transition: background 0.19s, transform 0.19s, box-shadow 0.16s;
    }
    #yesBtn:active {transform:scale(1.08);}
    #noBtn {
      background: #fff9;
      color: #ff3775;
      border: none;
      border-radius: 999px;
      padding: 12px 30px;
      font-size: 1.13rem;
      font-family: inherit;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 18px #fbe8ee49;
      filter: drop-shadow(0 0 8px #a1c4fd88);
      outline: none;
      position: absolute;
      top: 8px; left: 72%; /* s·∫Ω ƒë∆∞·ª£c ch·ªânh v·ªã tr√≠ b·∫±ng js */
      transition: all 0.24s cubic-bezier(.5,1.45,.55,.84);
      z-index: 10;
    }
    .result {
      min-height: 45px;
      font-size: 1.27rem;
      margin-top: 35px;
      color: #ff4b7d;
      font-family: 'Montserrat',sans-serif;
      font-weight: 700;
      display: none;
      animation: fadeIn 1.14s;
      letter-spacing: 1px;
      text-shadow: 0 1px 10px #fff8,0 0 4px #fdc8d6;
    }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
    /* Responsive */
    @media (max-width: 520px) {
      .lovebox{max-width:99vw; padding:10vw 2vw 8vw 2vw;}
      h1{font-size: 1.27rem;}
      .heartwave{width:56px;height:56px;}
      .heart-icon{font-size:35px;}
      .btn-row{margin:24px 0 6px 0; height:78px;}
      #yesBtn{font-size:1.03rem; padding:10px 20px;}
      #noBtn{font-size:1rem; padding:8px 16px; left:65%;}
    }
  </style>
</head>
<body>
  <canvas id="liquid-bg"></canvas>
  <audio id="bgmusic" src="https://cdn.pixabay.com/audio/2023/02/10/audio_12ba16f55d.mp3" loop></audio>
  <div class="lovebox" id="box">
    <div class="heartwave" id="bigHeart" title="Ch·∫°m v√†o tr√°i tim!">
      <span class="heart-icon">üíó</span>
    </div>
    <h1>Cho t·ªõ h·ªèi nh·ªè n√†y nh√©...</h1>
    <div class="subtitle">
      N·∫øu h√¥m nay t·ªõ t·ªè t√¨nh,<br>
      c·∫≠u c√≥ ƒë·ªìng √Ω l√†m ng∆∞·ªùi y√™u t·ªõ kh√¥ng? ü•πüíñ
    </div>
    <div class="btn-row" id="btnRow">
      <button id="yesBtn" onclick="confess(true)">ƒê·ªìng √Ω üíñ</button>
      <button id="noBtn" onmouseover="moveNoBtn()" ontouchstart="moveNoBtn()">Kh√¥ng ƒë√¢u üòú</button>
    </div>
    <div class="result" id="result"></div>
  </div>
  <script>
    // N·ªÅn gradient ƒë·ªông liquid ngh·ªá
    const canvas = document.getElementById('liquid-bg');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = window.innerWidth, h = canvas.height = window.innerHeight;
    function resize() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);

    // Th√™m nhi·ªÅu qu·∫£ b√≥ng m√†u t·∫°o hi·ªáu ·ª©ng liquid
    let balls = [];
    for (let i = 0; i < 5; i++) {
      balls.push({
        r: 260 + Math.random()*90,
        x: Math.random()*w,
        y: Math.random()*h,
        dx: (Math.random()-0.5)*0.7,
        dy: (Math.random()-0.5)*0.7,
        c: ['#ff8ec4','#b8e0ff','#ffdde1','#bca4ff','#fff0ec','#ffe7fa'][i]
      });
    }
    function drawLiquid() {
      ctx.clearRect(0,0,w,h);
      for(let b of balls) {
        let grad = ctx.createRadialGradient(b.x,b.y,b.r*0.2,b.x,b.y,b.r);
        grad.addColorStop(0, b.c+'f5');
        grad.addColorStop(1, b.c+'00');
        ctx.beginPath();
        ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
        ctx.fillStyle = grad;
        ctx.fill();
        b.x += b.dx;
        b.y += b.dy;
        if(b.x-b.r<0 || b.x+b.r>w) b.dx*=-1;
        if(b.y-b.r<0 || b.y+b.r>h) b.dy*=-1;
      }
      requestAnimationFrame(drawLiquid);
    }
    drawLiquid();

    // Nh·∫°c n·ªÅn t·ª± ƒë·ªông
    setTimeout(()=>{
      let music = document.getElementById('bgmusic');
      music.volume = 0.19;
      music.play().catch(()=>{});
    }, 700);

    // N√∫t "Kh√¥ng ƒë√¢u" ch·∫°y quanh h√¨nh tr√≤n h·ªôp
    let angle = Math.random()*Math.PI*2, R = 96;
    function moveNoBtn() {
      const noBtn = document.getElementById('noBtn');
      const btnRow = document.getElementById('btnRow');
      let w = btnRow.offsetWidth, h = btnRow.offsetHeight;
      // T√≠nh v·ªã tr√≠ theo h√¨nh tr√≤n
      angle += Math.PI/3 + Math.random()*Math.PI/2.1;
      let x = (w/2) + R * Math.cos(angle) - noBtn.offsetWidth/2;
      let y = (h/2) + R * Math.sin(angle) - noBtn.offsetHeight/2;
      // Ch·∫∑n ra kh·ªèi n√∫t
      x = Math.max(0, Math.min(w-noBtn.offsetWidth, x));
      y = Math.max(-4, Math.min(h-noBtn.offsetHeight, y));
      noBtn.style.left = x+"px";
      noBtn.style.top = y+"px";
    }

    // Heart wave effect + b·∫Øn tim nh·ªè + rung h·ªôp
    document.getElementById('bigHeart').onclick = function(e) {
      let box = document.getElementById('box');
      let center = this.getBoundingClientRect();
      // T·∫°o s√≥ng lan
      let wave = document.createElement('div');
      wave.style.position = 'fixed';
      wave.style.left = (center.left + center.width/2) + "px";
      wave.style.top = (center.top + center.height/2) + "px";
      wave.style.borderRadius = '50%';
      wave.style.pointerEvents = 'none';
      wave.style.zIndex = 1000;
      wave.style.width = wave.style.height = '40px';
      wave.style.background = "radial-gradient(circle, #ffe7fa99 0%, #fff0 70%)";
      wave.style.opacity = "1";
      wave.style.transition = "all 1.1s cubic-bezier(.3,1.53,.41,0.85)";
      document.body.appendChild(wave);
      setTimeout(()=>{
        wave.style.width = "440px";
        wave.style.height = "440px";
        wave.style.marginLeft = "-220px";
        wave.style.marginTop = "-220px";
        wave.style.opacity = "0";
      },10);
      setTimeout(()=>wave.remove(),1100);
      // B·∫Øn nhi·ªÅu tim nh·ªè theo s√≥ng
      for(let i=0;i<12;i++) setTimeout(()=>{
        floatHeart(center.left+center.width/2+Math.random()*90-45, center.top+center.height/2+Math.random()*80-40);
      }, i*60+Math.random()*50);
      // Rung h·ªôp
      box.style.animation = 'shake 0.24s';
      setTimeout(()=>box.style.animation='',250);
    };

    // Tim bay tr√†n m√†n khi click "ƒê·ªìng √Ω"
    function floatHeart(x, y) {
      const heart = document.createElement('div');
      heart.className = 'heart-icon';
      heart.innerText = ['üíó','üíñ','üíò','üíù','üíï','üíì'][Math.floor(Math.random()*6)];
      heart.style.position = 'fixed';
      heart.style.left = (x || window.innerWidth/2)+'px';
      heart.style.top = (y || window.innerHeight/2)+'px';
      heart.style.fontSize = (28+Math.random()*40)+'px';
      heart.style.opacity = "0.94";
      heart.style.pointerEvents = "none";
      heart.style.transition = "transform 2.0s cubic-bezier(.22,1.45,.48,.93), opacity 2s";
      heart.style.transform = "translate(-50%,0) scale(1)";
      document.body.appendChild(heart);
      setTimeout(()=>{
        heart.style.transform = "translate(-50%,-220px) scale(0.8) rotate("+((Math.random()*50)-25)+"deg)";
        heart.style.opacity = 0;
      }, 40);
      setTimeout(()=>heart.remove(), 2000);
    }

    // Hi·ªáu ·ª©ng khi ƒë·ªìng √Ω
    function confess(isYes) {
      let result = document.getElementById('result');
      let box = document.getElementById('box');
      if(isYes){
        // L·ªùi y√™u c·ª±c chill
        result.innerHTML = [
          "T·ª´ nay m√¨nh l√† m·ªôt c·∫∑p r·ªìi nha! üíë<br><span style='color:#ab31b9'>Y√™u c·∫≠u t·ª´ tr√°i tim n√® üíñ</span>",
          "Kh√¥ng tin ƒë∆∞·ª£c lun! H·∫°nh ph√∫c qu√° ƒëi m·∫•t üòò<br>B·∫Øt ƒë·∫ßu chuy·ªán t√¨nh ƒë√°ng y√™u nh√©!",
          "ƒê·ªìng √Ω r·ªìi n√®, y√™u nhau m√£i nh√© c·∫≠u iu ü•∞"
        ][Math.floor(Math.random()*3)];
        result.style.display = 'block';
        // Rung + glow box
        box.style.boxShadow = '0 0 120px 35px #fca6ec8a, 0 0 120px #e9bfffdf inset';
        box.style.animation = 'popIn 1.1s cubic-bezier(.31,1.53,.61,.87)';
        setTimeout(()=>{box.style.boxShadow='';box.style.animation='';}, 1200);
        // M∆∞a tim bay
        for(let i=0;i<22;i++) setTimeout(()=>{
          floatHeart(
            window.innerWidth*0.18+Math.random()*window.innerWidth*0.68,
            window.innerHeight*0.15+Math.random()*window.innerHeight*0.7
          );
        }, i*42+Math.random()*60);
        // Confetti n·ªï r·ª±c r·ª°
        for(let i=0;i<5;i++) setTimeout(()=>{
          confetti({
            particleCount: 75+Math.random()*30,
            angle: 90+Math.random()*50-25,
            spread: 70+Math.random()*38,
            origin: {x:0.25+0.18*Math.random(), y:0.78+Math.random()*0.04}
          });
          confetti({
            particleCount: 68+Math.random()*24,
            angle: 90+Math.random()*50-25,
            spread: 68+Math.random()*32,
            origin: {x:0.66+0.13*Math.random(), y:0.78+Math.random()*0.06}
          });
        }, i*280);
      }
    }
  </script>
</body>
</html>
